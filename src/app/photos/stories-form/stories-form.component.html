<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.6/control_utils.css" crossorigin="anonymous">

<div class="bg-white stories-form">


    <button id="btn-front" class='d-none'>Front</button>
    <button id="btn-back" class='d-none'>Back</button>

    <video class="{{snapshotOk?'d-none':''}} {{spinner?'blur-circle':''}}" id="video" autoplay playsInline ></video>
    <div class="{{snapshotOk?'':'d-none'}} {{filter}}" id="output">
        <img id="outputImage" style="display:none;object-fit: cover;height: 100vh;" class="w-100" alt="Img output">
    </div>

    <!-- <div class="container-media">
        <div class="canvas-container">
            <canvas class="output_canvas" width="100%" height="100vh">
            </canvas>
        </div>
    </div> -->
    <div class="control-panel d-none">
    </div>

    <div class="container-panel {{snapshotOk?'p-0 m-0':''}} {{spinner?'d-none':''}}" >
        <table>
            <tr>
                <td class="{{snapshotOk?'':'d-none'}}" (click)="undo()">
                    <svg xmlns="http://www.w3.org/2000/svg" class='mb-4' height="30px" viewBox="0 0 24 24" width="30px" fill="#fff"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>
                </td>
                <td (click)="changeCamera()" class="{{snapshotOk?'d-none':''}}">
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#fff">
                        <g>
                            <rect fill="none" height="24" width="24" />
                        </g>
                        <g>
                            <g>
                                <path d="M9,12c0,1.66,1.34,3,3,3s3-1.34,3-3s-1.34-3-3-3S9,10.34,9,12z M13,12c0,0.55-0.45,1-1,1s-1-0.45-1-1s0.45-1,1-1 S13,11.45,13,12z" />
                                <path d="M8,10V8H5.09C6.47,5.61,9.05,4,12,4c3.72,0,6.85,2.56,7.74,6h2.06c-0.93-4.56-4.96-8-9.8-8C8.73,2,5.82,3.58,4,6.01V4H2v6 H8z" />
                                <path d="M16,14v2h2.91c-1.38,2.39-3.96,4-6.91,4c-3.72,0-6.85-2.56-7.74-6H2.2c0.93,4.56,4.96,8,9.8,8c3.27,0,6.18-1.58,8-4.01V20 h2v-6H16z" />
                            </g>
                        </g>
                    </svg>
                </td>
                <td (click)="snapshot()" class="{{snapshotOk?'d-none':''}}">
                    <svg xmlns="http://www.w3.org/2000/svg" height="54px" viewBox="0 0 24 24" width="54px" fill="#fff">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
                    </svg>
                </td>
                <td class="{{snapshotOk?'d-none':''}}" (click)="openFile()">
                    <input class='file-input-stories-form'  max-size="20000" hidden type="file" (change)="fileChangeEvent( $event )" multiple="false">

                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#fff">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path d="M20 4v12H8V4h12m0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 9.67l1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" />
                    </svg>
                </td>
            </tr>
            <tr>
                <td class="{{snapshotOk?'':'d-none'}} row-photos-swiper-stories-form">
                    <swiper [spaceBetween]="1" effect="fade" [slidesPerView]="cols">               
                        <ng-template swiperSlide *ngFor="let item of items(); let i = index;">
                            <div>
                                <img src="{{file}}" class="rounded cursor-pointer item  {{item}}" (click)="selectItemCarousel(item)" alt='Filters carousel'>                            
                            </div>
                        </ng-template>
                    </swiper>
                </td>
            </tr>
            <tr class="{{snapshotOk?'d-none':''}}">
                <td>Video</td>
                <td>Photo</td>
                <td>
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#fff">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path d="M16.66 4.52l2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z" />
                    </svg>
                </td>
            </tr>
        </table>
    </div>
    <div class="{{!spinner?'d-none':''}} div-spinner">
        <span *ngIf="spinner" class="spinner-border" ></span>
    </div>

</div>


